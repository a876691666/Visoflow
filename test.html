<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title> </title>
  </head>
  <body>
    <div class="g-container">
      <!-- SVG 实现线条动画 -->
      <div class="g-svg">
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 240 100"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
        >
          <defs>
            <!-- 渐变球体填充 -->
            <radialGradient id="ballGrad" cx="50%" cy="50%" r="50%">
              <stop offset="0%" stop-color="#ffffff" />
              <stop offset="50%" stop-color="#ffd180" />
              <stop offset="100%" stop-color="orange" />
            </radialGradient>

            <!-- 运动与遮罩使用的路径（与 polyline 点一致） -->
            <path
              id="trackPath"
              d="M240 10 L140 10 L140 90 L0 90"
              stroke-width="2"
              fill="none"
            />

            <!-- 使用路径描边作为遮罩，只显示路径描边区域内的内容 -->
            <mask id="lineMask" maskUnits="userSpaceOnUse">
              <use
                href="#trackPath"
                stroke="white"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="4"
                fill="none"
              />
            </mask>

            <!-- 随球体移动的“后半圆”遮罩：用于裁剪红色短线，使其只在球体后半部分可见 -->
            <mask id="trailMask" maskUnits="userSpaceOnUse">
              <g>
                <animateMotion
                  dur="2.4s"
                  repeatCount="indefinite"
                  rotate="auto"
                >
                  <mpath href="#trackPath" xlink:href="#trackPath" />
                </animateMotion>
                <!-- 白色为可见区：半径略大于球体，确保完全覆盖后半部分 -->
                <circle r="29" fill="white" />
                <!-- 黑色遮掉前半部分（x>=0），rotate=auto 会让此矩形始终指向运动前方 -->
                <rect x="0" y="-29" width="42" height="66" fill="black" />
              </g>
            </mask>
          </defs>

          <!-- 基础路径 -->
          <path
            d="M240 10 L140 10 L140 90 L0 90"
            stroke="orange"
            fill="transparent"
            stroke-width="2"
          />

          <!-- 只在球体后半圆区域显示的红色短线（随球体移动） -->
          <g mask="url(#trailMask)">
            <path
              class="g-short-line"
              d="M240 10 L140 10 L140 90 L0 90"
              fill="transparent"
              stroke="red"
              stroke-width="2"
              stroke-linecap="round"
            />
          </g>

          <!-- 球体同时受基础路径遮罩(lineMask)与短线遮罩(trailMask)共同裁剪 -->
          <g mask="url(#lineMask)">
            <g mask="url(#trailMask)">
              <circle r="30" fill="url(#ballGrad)">
                <animateMotion
                  dur="2.4s"
                  repeatCount="indefinite"
                  rotate="auto"
                  keyPoints="0;1"
                  keyTimes="0;1"
                  calcMode="linear"
                >
                  <mpath href="#trackPath" xlink:href="#trackPath" />
                </animateMotion>
              </circle>
            </g>
          </g>
        </svg>
      </div>
    </div>
  </body>
  <style>
    body,
    html {
      width: 100%;
      height: 100%;
      display: flex;
      background: #fff;
    }

    .g-container {
      position: relative;
      margin: auto;
      width: 200px;
      height: 100px;
    }

    .g-svg {
      --color: orange;
      position: absolute;
      width: 240px;
      height: 100px;
      right: -240px;
      top: -50px;
    }
  </style>
</html>
